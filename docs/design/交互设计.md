# 交互设计与页面逻辑 (Interaction Design)

本文档定义了“与她的海大时光笺”的核心交互逻辑与用户体验设计。

## 1. 全局体验 (Global Experience)

### 1.1 开场仪式 (Envelope Intro)
用户进入网站时的第一印象，旨在建立沉浸感。
- **视觉**: 全屏显示一封带有海南大学元素（如校徽火漆印）的信封。
- **交互**: 
  - 用户点击信封中心。
  - **动画**: 火漆碎裂 -> 信纸抽出 -> 整体淡出 (Framer Motion)。
  - **状态**: 动画结束后，全局状态 `isEnvelopeOpened` 设为 `true`，展示主界面。

### 1.2 响应式分流 (Responsive Strategy)
采用 **双端差异化体验** 策略，而非简单的 CSS 响应式缩放。
- **PC 端 (>768px)**: 进入 **[时光画卷 (Desktop View)](#2-pc-端-时光画卷)**。
- **移动端 (≤768px)**: 进入 **[掌心集邮册 (Mobile View)](#3-移动端-掌心集邮册)**。
- **实现**: 在 `app/page.tsx` 中根据屏幕宽度条件渲染不同组件树。

---

## 2. PC 端: 时光画卷 (Desktop View)

> **核心隐喻**: “挂在墙上的画卷” —— 宏大、静止、精致。

### 2.1 交互式地图 (Interactive Map)
- **布局**: 全屏显示海大手绘地图，使用 `object-fit: contain` 确保完整显示，不进行缩放或平移（避免用户迷失）。
- **Pin 点 (Avatars)**:
  - 地图上根据坐标散落 Q 版角色头像。
  - 若某地点有多个故事，显示最新发布的角色头像。
  - **Hover**: 头像轻微跳动，并显示地点名称 Tooltip。
  - **Click**: 打开该地点的 [明信片模态框](#22-明信片模态框-postcard-modal)。

### 2.2 明信片模态框 (Postcard Modal)
- **布局**: 左右分栏的大尺寸弹窗。
  - **左侧**: 沉浸式高清大图（叠加胶片噪点滤镜 `mix-blend-mode: overlay`）。
  - **右侧**: 故事文本区 + 顶部 **邮票切换器**。
- **邮票切换器 (Stamp Switcher)**:
  - **功能**: 在同一地点的不同故事间切换。
  - **交互**: 点击左右箭头，邮票滑出/滑入，同时切换左侧大图和右侧文字内容。

---

## 3. 移动端: 掌心集邮册 (Mobile View)

> **核心隐喻**: “手中的集邮册” —— 高效、私密、易读。

### 3.1 故事瀑布流 (Story Feed)
- **策略**: 放弃手机端难用的地图交互，改为垂直瀑布流。
- **卡片**: 展示高清大图缩略 + 地点/角色信息。
- **FAB (悬浮按钮)**: 右下角常驻“指南针”按钮，点击弹出一张 **纯静态海大地图** 图片，仅供查看地理位置，不可交互。

### 3.2 沉浸阅读 (Detail Modal)
- **转场**: 点击列表卡片 -> **共享元素转场 (Shared Element Transition)** -> 图片放大至全屏。
- **布局**: 上图下文。
  - **上部**: 高清大图 (占据约 50% 高度)。
  - **中部**: 邮票切换栏 (居中大邮票 + 左右切换箭头)。
  - **下部**: 滚动阅读故事文本。
- **手势**:
  - **左右滑动**: 切换同一地点的不同故事。
  - **下拉 (Pull-to-close)**: 关闭详情页返回列表。

---

## 4. 视觉风格 (Visual Style)

### 4.1 关键词
- **Galgame**: 精致人物立绘，情感化叙事。
- **Skeuomorphism (拟物)**: 信封、火漆印、邮票齿孔、纸张纹理。
- **Glassmorphism (玻璃拟态)**: 模态框背景采用高斯模糊 (Backdrop Blur)。

### 4.2 调色板 (Palette)
- **Primary**: `#0ea5e9` (海大蓝/Ocean Blue)
- **Background**: `#fdfbf7` (米白/信纸色)
- **Text**: `#292524` (Stone-800)

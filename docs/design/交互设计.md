# 交互设计与页面逻辑 (Interaction Design)

本文档定义了“与她的海大时光笺”的核心交互逻辑与用户体验设计。

## 1. 全局体验 (Global Experience)

### 1.1 开场仪式 (Intro Page)
用户进入网站时的第一印象，旨在建立沉浸感并传达项目理念。这是一个垂直滚动的单页结构。

#### 第一屏：启封 (The Envelope)
- **视觉**: 
  - **标题**: 屏幕上方居中显示“与她的海大时光笺”大字标题，采用具有文学感的字体。
  - **核心**: 屏幕中央显示一封带有海南大学元素（如校徽火漆印）的信封。
- **交互**: 
  - **点击信封**: 
    - **动画**: 火漆碎裂 -> 信纸抽出 -> 整体淡出 (Framer Motion)。
    - **状态**: 动画结束后，全局状态 `isEnvelopeOpened` 设为 `true`，展示主界面（地图/集邮册）。
  - **下滑**: 进入“关于项目”板块。

#### 第二屏：关于项目 (About Project)
- **内容**: 介绍项目的背景、初衷和愿景。
- **交互**: 上滑返回第一屏，下滑进入“关于我们”。

#### 第三屏：关于我们 (About Us)
- **内容**: 介绍开发团队、画师、文案等成员信息。
- **交互**: 上滑返回“关于项目”。

### 1.2 响应式分流 (Responsive Strategy)
采用 **双端差异化体验** 策略，而非简单的 CSS 响应式缩放。
- **PC 端 (>768px)**: 进入 **[时光画卷 (Desktop View)](#2-pc-端-时光画卷)**。
- **移动端 (≤768px)**: 进入 **[掌心集邮册 (Mobile View)](#3-移动端-掌心集邮册)**。
- **实现**: 在 `app/page.tsx` 中根据屏幕宽度条件渲染不同组件树。

---

## 2. PC 端: 时光画卷 (Desktop View)

> **核心隐喻**: “挂在墙上的画卷” —— 宏大、静止、精致。

### 2.1 交互式地图 (Interactive Map)
- **布局**: 地图区作为页面下半部分的独立区块，保持 `h-screen` 全屏高度；使用 `object-fit: contain` 确保完整显示，不进行缩放或平移（避免用户迷失）。
- **Pin 点 (Avatars)**:
  - 地图上根据坐标散落 Q 版角色头像。
  - 若某地点有多个故事，显示最新发布的角色头像。
  - **Hover**: 头像轻微跳动，并显示地点名称 Tooltip。
  - **Click**: 
    - 记录并更新当前地点状态。
    - **视线转移**: 页面触发原生平滑滚动 (`scrollIntoView`)，自动上移到上方的 **[故事卡片堆](#22-故事卡片堆-story-card-stack)** 区域。
    - **状态**: 仅在点击新地点时替换故事数据；滚动回地图不会清空已展开内容。

### 2.2 故事卡片堆 (Story Card Stack)
> **参考**: [Motion for React - Card Stack](https://examples.motion.dev/react/card-stack)

- **状态与布局**: 
  - **页面结构**: 故事区固定在页面顶部，地图区紧随其后，二者采用普通文档流上下排版（不再使用双层覆盖切换）。
  - **默认状态**: 首次进入时故事区折叠（未选地点不渲染），用户首屏直接看到地图。
  - **激活状态**: 点击地点后故事区按内容自然展开，页面平滑滚动到故事区。
  - **地图联动**: 用户通过自然滚动在故事区与地图区之间往返，不再存在“滚到底自动返回并清空状态”的强制行为。
- **卡片设计 (Visual Card)**:
  - **图文模式**: 卡片以沉浸式高清插画/CG为主，**纯图片展示 (无文字)**。
  - **比例**: **自适应 (Adaptive)**。卡片尺寸跟随图片原始比例变化，不强制统一宽高比，允许横图与竖图混合堆叠，增加视觉的错落感和随机性。
- **故事文本区 (Story Text Area)**:
  - **位置**: 位于卡片堆正下方，地图上方。采用居中布局，确保阅读视线自然下落。
  - **默认状态**: **隐藏 (Hidden)**，并在卡片堆下方保留留白缓冲区，避免地图视觉上紧贴故事区。
  - **激活交互**: 用户点击**顶层卡片**时，文本区淡入显示。
  - **内容**: 显示当前**顶层卡片**对应的故事文本。字体应选用易读的衬线体。
  - **交互联动**: 
    - **切换**: 当用户划走顶层卡片（切换到下一张）时，文本区内容同步触发**淡入淡出**切换至新故事。
    - **关闭**: 点击文本区外部或再次点击卡片，文本区隐藏，恢复纯粹的图片欣赏模式。
- **核心交互**:
  - **堆叠 (Stack)**: 该地点的所有故事卡片在屏幕中央层叠显示。顶层卡片清晰，底层卡片按比例缩小、压暗并堆叠在后方，形成纵深感。
  - **滑动 (Swipe)**: 
    - 用户向左或向右拖拽顶层卡片。
    - **飞出**: 卡片跟随手势飞出屏幕边缘。
    - **切换**: 下一张卡片弹簧动画弹至顶层。
    - **循环**: 被划走的卡片重新回到堆叠底部。

---

## 3. 移动端: 掌心集邮册 (Mobile View)

> **核心隐喻**: “手中的集邮册” —— 高效、私密、易读。

### 3.1 故事瀑布流 (Story Feed)
- **策略**: 放弃手机端难用的地图交互，改为垂直瀑布流。
- **卡片**: 展示高清大图缩略 + 地点/角色信息。
- **FAB (悬浮按钮)**: 右下角常驻“地图”图标按钮，点击弹出一张 **纯静态海大地图** 图片，仅供查看地理位置，不可交互。

### 3.2 沉浸阅读 (Detail Modal)
- **转场**: 点击列表卡片 -> **共享元素转场 (Shared Element Transition)** -> 图片放大至全屏。
- **布局**: 上图下文。
  - **上部**: 高清大图 (占据约 50% 高度)，覆盖左右切换箭头。
  - **中部**: 角色头像与信息区。
  - **下部**: 滚动阅读故事文本。
- **手势**:
  - **点击箭头**: 切换同一地点的不同故事。
  - **左右滑动**: 切换不同地点。
  - **下拉 (Pull-to-close)**: 关闭详情页返回列表。

---

## 4. 视觉风格 (Visual Style)

### 4.1 关键词
- **Galgame**: 精致人物立绘，情感化叙事。
- **Skeuomorphism (拟物)**: 信封、火漆印、邮票齿孔、纸张纹理。
- **Glassmorphism (玻璃拟态)**: 模态框背景采用高斯模糊 (Backdrop Blur)。

### 4.2 调色板 (Palette)
- **Primary**: `#0ea5e9` (海大蓝/Ocean Blue)
- **Background**: `#fdfbf7` (米白/信纸色)
- **Text**: `#292524` (Stone-800)

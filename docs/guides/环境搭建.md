# 环境搭建与开发流程

## 1. 安装依赖
确保 Node.js 版本 >= 20。
```bash
npm install
```

## 2. 环境变量配置
复制 `.env.example` 到 `.env.local` 并填入凭证：
```bash
cp .env.example .env.local
```
*需要配置飞书 App ID/Secret 以及阿里云 OSS 访问密钥。详见 [飞书 CMS 配置](./飞书CMS配置.md)。*

## 3. 数据同步 (关键步骤)
项目**不包含** Mock 数据，必须连接飞书同步真实数据：
```bash
npm run sync
```
*成功后会在 [src/data/](file:///c:/Documents/Galgame群活动/与她的海大时光笺/web/src/data/) 下生成 `content.json`。*

## 4. 启动开发服务器
```bash
npm run dev
```
访问 `http://localhost:3000`。

## 5. 协同开发规范 (Workflow)

### 5.1 分支管理 (Git Branching)
- `main`: **生产分支** (Vercel 自动部署)。仅允许通过 PR 合并，禁止直接 Push。
- `dev`: **开发主分支**。所有功能分支合并至此进行联调。
- `feat/infra`: Dev A 工作分支。
- `feat/desktop`: Dev B 工作分支。
- `feat/mobile`: Dev C 工作分支。

### 5.2 目录权限 (Directory Ownership)
为了防止代码冲突，请严格遵守以下目录修改权限：
- `src/app/`: [Dev A] 全局路由与布局
- `src/components/desktop/`: [Dev B] 桌面端专用组件
- `src/components/mobile/`: [Dev C] 移动端专用组件
- `src/components/shared/`: [Dev A] 通用组件
- `src/lib/`: [Dev A] 类型定义与工具函数

## 6. 常见命令
- `npm run build`: 生产构建 (会自动执行 sync)。
- `npm run lint`: 代码检查。
